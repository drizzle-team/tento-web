import CodeTab from '@mdx/CodeTab.astro';
import Callout from '@mdx/Callout.astro';

# Tento Product Query

## List
Tento represents Shopify [Products query](https://shopify.dev/docs/api/admin-graphql/2024-10/queries/products)

<Callout type="info">
If you don't provide partial fields selection **Tento** will return all possible fields for **Product**
</Callout>
<CodeTab>
```typescript
const result = await client.metaobjects.products.list();
```
```typescript
// result type
const result: {
  items: {
    id: string;
    createdAt: Date;
    updatedAt: Date;
    isGiftCard: boolean;
    category?: {
      fullName: string;
      id: string;
      isLeaf: boolean;
      isRoot: boolean;
      name: string;
      ancestorIds: number[];
      childrenIds: number[];
      isArchived: boolean;
      level: number;
      parentId?: number | undefined;
    } | undefined;
    ... 30 more ...;
    vendor: string;
    }[];
  pageInfo: {
    startCursor: string;
    endCursor: string;
    hasNextPage: boolean;
    hasPreviousPage: boolean;
  };
}
```
</CodeTab>

## Partial fields select
`fields` parameter lets you include or omit fields you want to get from Shopify.
<Callout type="info">
Tento performs partial selects on the query level, no additional data is transferred from the Shopify.
</Callout>

**Get including only with just `id`, `title`:**
```typescript
const result = await client.metaobjects.products.list({
  fields: {
    id: true,
    title: true,
  },
});
```
\
**Get excluding `id`, `handle`, `updatedAt`, `description`:**
```typescript
const result = await client.products.list({
  fields: {
    id: false,
    handle: false,
    updatedAt: false,
    description: false,
  },
});
```
\
**Exclude and Include fields in the same query:**
> When both `true` and `false` select options are present, all `false` options are ingored.

If you include the `title` field and exclude the `id` field, `id` exclusion will be redundant, all fields apart from `title` would be excluded anyways.
```typescript
const result = await client.metaobjects.products.list({
  fields: {
    id: false,
    title: true,
  },
});
```

## Filters

Tento supports all pecific filters what Shopify has, see [here](https://shopify.dev/docs/api/usage/search-syntax).  
Especially for products querying Tento supports all Shopify [Products Query filters](https://shopify.dev/docs/api/admin-graphql/2024-10/queries/products).

#### eq
Supported fields to filter  
|               |                                                                                                                                |
| :------------ | :-----------------------------------                                                                                           |
| fields        | `default`, `barcode`, `bundles`, `categoryId`, `combinedListingRole`, `createdAt`, `deliveryProfileId`, `giftCard`, `handle`,  |
|               | `hasOnlyComposites`, `hasOnlyDefaultVariant`, `hasVariantWithComponents`, `id`, `inventoryTotal`, `isPriceReduced`,            |
|               | `outOfStockSomewhere`, `price`, `productConfigurationOwner`, `productType`, `publishedStatus`, `publishedAt`, `sku`, `status`, |
|               | `tag`, `tagNot`, `title`, `updatedAt`, `vendor`                                                                                |
```typescript
const result = await client.products.list({
  query: {
   title: "product #1"
  },
});
```

#### not
Supported fields to filter  
|               |                                                                                                                                |
| :------------ | :-----------------------------------                                                                                           |
| fields        | `default`, `barcode`, `bundles`, `categoryId`, `combinedListingRole`, `createdAt`, `deliveryProfileId`, `giftCard`, `handle`,  |
|               | `hasOnlyComposites`, `hasOnlyDefaultVariant`, `hasVariantWithComponents`, `id`, `inventoryTotal`, `isPriceReduced`,            |
|               | `outOfStockSomewhere`, `price`, `productConfigurationOwner`, `productType`, `publishedStatus`, `publishedAt`, `sku`, `status`, |
|               | `tag`, `tagNot`, `title`, `updatedAt`, `vendor`                                                                                |
```typescript
const result = await client.products.list({
  query: {
   title: {
      $not: "product #1"
    }
  },
});
```

#### gt
Supported fields to filter  
|               |                                                                                                                                |
| :------------ | :-----------------------------------                                                                                           |
| fields        | `default`, `barcode`, `bundles`, `categoryId`, `combinedListingRole`, `createdAt`, `deliveryProfileId`, `giftCard`, `handle`,  |
|               | `hasOnlyComposites`, `hasOnlyDefaultVariant`, `hasVariantWithComponents`, `id`, `inventoryTotal`, `isPriceReduced`,            |
|               | `outOfStockSomewhere`, `price`, `productConfigurationOwner`, `productType`, `publishedStatus`, `publishedAt`, `sku`, `status`, |
|               | `tag`, `tagNot`, `title`, `updatedAt`, `vendor`                                                                                |
```typescript
const result = await client.products.list({
  query: {
    id: {
      $gt: "1"
    }
  },
});
```

#### gte
Supported fields to filter  
|               |                                                                                                                                |
| :------------ | :-----------------------------------                                                                                           |
| fields        | `default`, `barcode`, `bundles`, `categoryId`, `combinedListingRole`, `createdAt`, `deliveryProfileId`, `giftCard`, `handle`,  |
|               | `hasOnlyComposites`, `hasOnlyDefaultVariant`, `hasVariantWithComponents`, `id`, `inventoryTotal`, `isPriceReduced`,            |
|               | `outOfStockSomewhere`, `price`, `productConfigurationOwner`, `productType`, `publishedStatus`, `publishedAt`, `sku`, `status`, |
|               | `tag`, `tagNot`, `title`, `updatedAt`, `vendor`                                                                                |
```typescript
const result = await client.products.list({
  query: {
    id: {
      $gte: "1"
    }
  },
});
```

#### lt
Supported fields to filter  
|               |                                                                                                                                |
| :------------ | :-----------------------------------                                                                                           |
| fields        | `default`, `barcode`, `bundles`, `categoryId`, `combinedListingRole`, `createdAt`, `deliveryProfileId`, `giftCard`, `handle`,  |
|               | `hasOnlyComposites`, `hasOnlyDefaultVariant`, `hasVariantWithComponents`, `id`, `inventoryTotal`, `isPriceReduced`,            |
|               | `outOfStockSomewhere`, `price`, `productConfigurationOwner`, `productType`, `publishedStatus`, `publishedAt`, `sku`, `status`, |
|               | `tag`, `tagNot`, `title`, `updatedAt`, `vendor`                                                                                |
```typescript
const result = await client.products.list({
  query: {
    id: {
      $lt: "1"
    }
  },
});
```

#### lte
Supported fields to filter  
|               |                                                                                                                                |
| :------------ | :-----------------------------------                                                                                           |
| fields        | `default`, `barcode`, `bundles`, `categoryId`, `combinedListingRole`, `createdAt`, `deliveryProfileId`, `giftCard`, `handle`,  |
|               | `hasOnlyComposites`, `hasOnlyDefaultVariant`, `hasVariantWithComponents`, `id`, `inventoryTotal`, `isPriceReduced`,            |
|               | `outOfStockSomewhere`, `price`, `productConfigurationOwner`, `productType`, `publishedStatus`, `publishedAt`, `sku`, `status`, |
|               | `tag`, `tagNot`, `title`, `updatedAt`, `vendor`                                                                                |
```typescript
const result = await client.products.list({
  query: {
    id: {
      $lte: "1"
    }
  },
});
```

#### raw

```typescript
const result = await client.products.list({
  query: {
   $raw: "id:1"
  },
});
```

#### and
Supported fields to filter  
|               |                                                                                                                                |
| :------------ | :-----------------------------------                                                                                           |
| fields        | `default`, `barcode`, `bundles`, `categoryId`, `combinedListingRole`, `createdAt`, `deliveryProfileId`, `giftCard`, `handle`,  |
|               | `hasOnlyComposites`, `hasOnlyDefaultVariant`, `hasVariantWithComponents`, `id`, `inventoryTotal`, `isPriceReduced`,            |
|               | `outOfStockSomewhere`, `price`, `productConfigurationOwner`, `productType`, `publishedStatus`, `publishedAt`, `sku`, `status`, |
|               | `tag`, `tagNot`, `title`, `updatedAt`, `vendor`                                                                                |
```typescript
const result = await client.products.list({
  query: [
      {
        id: "1"
      },
      {
        id: {
          $lte: "2",
        },
      },
    ],
});
```

#### or
Supported fields to filter  
|               |                                                                                                                                |
| :------------ | :-----------------------------------                                                                                           |
| fields        | `default`, `barcode`, `bundles`, `categoryId`, `combinedListingRole`, `createdAt`, `deliveryProfileId`, `giftCard`, `handle`,  |
|               | `hasOnlyComposites`, `hasOnlyDefaultVariant`, `hasVariantWithComponents`, `id`, `inventoryTotal`, `isPriceReduced`,            |
|               | `outOfStockSomewhere`, `price`, `productConfigurationOwner`, `productType`, `publishedStatus`, `publishedAt`, `sku`, `status`, |
|               | `tag`, `tagNot`, `title`, `updatedAt`, `vendor`                                                                                |
```typescript
const result = await client.products.list({
  query: {
    $or: [
      {
        id: "1",
      },
      {
        id: {
          $gt: "1",
        },
      },
    ],
  },
});
```

## Pagination

Tento supports [Shopify pagination](https://shopify.dev/docs/api/usage/pagination-graphql)

#### first

Supported pagination options  
| option        | default    | description                                          |
| :------------ | :----------| :-----------------------------------                 |
| `first`       | 50         | requested number of `nodes` for each page.           |
| `after`       | -          | cursor to retrieve `nodes` after in the connection.  |
```typescript
const result = await client.products.list({
  first: 10,
  after: "In0="
});
```

#### last

Supported pagination options  
| option        | default    | description                                          |
| :------------ | :----------| :-----------------------------------                 |
| `last`        | -          | requested number of `nodes` for each page.           |
| `before`      | -          | cursor to retrieve `nodes` after in the connection.  |
<Callout type="warning">
To provide `last` option you must specify `before` cursor to prevent exceptions.
</Callout>
```typescript
const result = await client.products.list({
  last: 10,
  before: "In0="
});
```

## Sort

Tento supports Shopify [Products query sort keys](https://shopify.dev/docs/api/admin-graphql/2024-10/queries/products)
Supported sort keys
|               |                                                                                                                      |
| :------------ | :-----------------------------------                                                                                 |
| keys          | `id`, `created_at`, `inventory_total`, `product_type`, `published_at`, `relevance`, `title` ,`updated_at` , `vendor` |
```typescript
const result = await client.products.list({
  sortKey: "id"
});
```
<Callout type="info">
You can control sort direction using `reverse` option. Default value is `false`.
</Callout>
```typescript
const result = await client.products.list({
  sortKey: "id",
  reverse: true,
});
```